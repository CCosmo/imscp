// See jquery.imscpTooltip-dev.js for the license
(function(e){function u(t){return e.data(t,"imscpTooltip")}function a(n){if(t.parent){return}t.parent=e('<div id="'+n.id+'"><div class="tooltipBody"></div></div>').appendTo(document.body).hide();if(e.fn.bgiframe){t.parent.bgiframe()}t.body=e("div.tooltipBody",t.parent)}function f(t){if(u(this).delay){i=setTimeout(c,u(this).delay)}else{c()}s=!u(this).followCursor;e(document.body).bind("mousemove",h);h(t)}function l(){if(this==n||!this.tooltipText){return}n=this;r=this.tooltipText;t.body.html(r).show();t.parent.addClass(u(this).extraClass);f.apply(this,arguments)}function c(){i=null;if((!o||!e.fn.bgiframe)&&u(n).fade){if(t.parent.is(":animated")){t.parent.stop().show().fadeTo(u(n).fade,n.tOpacity)}else{t.parent.is(":visible")?t.parent.fadeTo(u(n).fade,n.tOpacity):t.parent.fadeIn(u(n).fade)}}else{t.parent.show()}h()}function h(r){if(r&&r.target.tagName=="OPTION"){return}if(!s&&t.parent.is(":visible")){e(document.body).unbind("mousemove",h)}if(n==null){e(document.body).unbind("mousemove",h);return}t.parent.removeClass("viewport-right").removeClass("viewport-bottom");var i=t.parent[0].offsetLeft;var o=t.parent[0].offsetTop;if(r){i=r.pageX+u(n).left;o=r.pageY+u(n).top;var a="auto";if(u(n).positionLeft){a=e(window).width()-i;i="auto"}t.parent.css({left:i,right:a,top:o})}var f=p(),l=t.parent[0];if(f.x+f.cx<l.offsetLeft+l.offsetWidth){i-=l.offsetWidth+20+u(n).left;t.parent.css({left:i+"px"}).addClass("viewport-right")}if(f.y+f.cy<l.offsetTop+l.offsetHeight){o-=l.offsetHeight+20+u(n).top;t.parent.css({top:o+"px"}).addClass("viewport-bottom")}}function p(){return{x:e(window).scrollLeft(),y:e(window).scrollTop(),cx:e(window).width(),cy:e(window).height()}}function d(r){function a(){t.parent.removeClass(s.extraClass).hide().css("opacity","")}if(i){clearTimeout(i)}n=null;var s=u(this);if((!o||!e.fn.bgiframe)&&s.fade){if(t.parent.is(":animated")){t.parent.stop().fadeTo(s.fade,0,a)}else{t.parent.stop().fadeOut(s.fade,a)}}else{a()}}var t={},n,r,i,s=true,o=e.support.cssFloat&&/MSIE\s(5\.5|6\.)/.test(navigator.userAgent);e.imscpTooltip={defaultsSettings:{msg:"",opacity:.85,top:10,left:10,delay:200,fade:true,extraClass:"",id:"imscpTooltip"}};e.fn.extend({imscpTooltip:function(n){settings=e.extend({},e.imscpTooltip.defaultsSettings,n);a(settings);return this.each(function(){if(settings.msg||this.title){e.data(this,"imscpTooltip",settings);this.tOpacity=t.parent.css("opacity");this.tooltipText=settings.msg||this.title;e(this).removeAttr("title");this.alt="";e(this).mouseover(l).mouseout(d).click(d)}})}})})(jQuery)
